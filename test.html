<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Virtual DOM Example</title>
</head>
<body>
  <div id="root">

  </div>

  <script>
  class Parser {
  constructor() {
    this.index = 0;
  }

  parse(input) {
    this.input = input.trim();
    try {
      return this.parseAssignment();
    } catch (error) {
      console.error(`Parsing error: ${error.message}`);
      return null;
    }
  }

  parseAssignment() {
    const variableName = this.identifier();
    this.expect('=');
    const value = this.stringLiteral();
    this.expect(';');
    return { variableName, value };
  }

  identifier() {
    const regex = /[a-zA-Z_][a-zA-Z0-9_]*/;
    const match = this.match(regex);
    if (!match) {
      this.error('Expected an identifier');
    }
    return match[0];
  }

  stringLiteral() {
    const value = this.match(/[^"]+/);
    if (!value) {
      this.error('Expected a string literal');
    }
    return value[0];
  }

  expect(token) {
    const tokenIndex = this.index + token.length;
    if (this.input.slice(this.index, tokenIndex) === token) {
      this.index = tokenIndex;
    } else if (this.index < this.input.length) {
      this.error(`Expected "${token}" at index ${this.index}`);
    } else {
      this.error(`Unexpected end of input. Expected "${token}"`);
    }
  }

  match(regex) {
    const regexMatch = regex.exec(this.input.slice(this.index));
    if (regexMatch && regexMatch.index === 0) {
      this.index += regexMatch[0].length;
      return regexMatch;
    }
    return null;
  }

  error(message) {
    const context = 20;
    const startIndex = Math.max(0, this.index - context);
    const endIndex = Math.min(this.input.length, this.index + context);
    const errorContext = this.input.slice(startIndex, endIndex);
    throw new Error(`Parse error: ${message}. Context: ...${errorContext}...`);
  }
}

const parser = new Parser();

const input1 = 'html = "";';
const result1 = parser.parse(input1);
console.log(result1); // Output: { variableName: 'html', value: '' }

const input2 = 'myVar = "Hello, World!";';
const result2 = parser.parse(input2);
console.log(result2); // Output: { variableName: 'myVar', value: 'Hello, World!' }

const input3 = 'num = 42;';
const result3 = parser.parse(input3);
console.log(result3); // Output: { variableName: 'num', value: '42' }

const input4 = 'invalidStatement';
const result4 = parser.parse(input4);
console.log(result4); // Output: Parsing error: Expected "=" at index 14
                      //         ...invalidStatement...
                      // Output: null


  </script>
</body>
</html>
